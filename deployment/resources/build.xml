<?xml version="1.0"?>

<!-- ===================================================================
     Default public events web application deployer
     =================================================================== -->

<project name="bwcommonresources.deploy" default="deploy" >

  <target name="init" >
    <dirname property="common.resources.dir" file="${ant.file}"/>

    <property name="app.common.resources.dest.dir"
              location="${org.bedework.deploy.app.sou}" />

    <property name="org.bedework.use.dojo" value="true" />

    <!-- This should be in the config stuff -->
    <property name="propval.directory.browsing.disallowed"
              value="${app.directory.browsing.disallowed}" />
  </target>

  <!-- =================================================================
       The "deploy" target is called by applications which need common
       resources copied into their own directory structure.
       ================================================================= -->

  <target name="deploy" depends="init" >
  </target>

  <!-- =================================================================
       The "deploy.common" target is called once to create a common web
       accessible directory
       ================================================================= -->

  <target name="deploy.common" depends="init" >
    <property name="cmn.destdir"
              location="${org.bedework.appserver.dir}/${org.bedework.global.common.deploydir}"/>
    <if>
      <isset property="org.bedework.use.dojo" />
      <then>
        <!-- Add dojo -->
        <copy todir="${cmn.destdir}/javascript/dojo">
          <fileset dir="${common.resources.dir}/javascript/${dojo.dir}" />
        </copy>
      </then>
    </if>

    <copy todir="${cmn.destdir}">
      <fileset dir="${common.resources.dir}/xsl" />
    </copy>
  </target>
</project>

