<?xml version="1.0"?>

<!-- ===================================================================
     liferay4 portlet deployer
     =================================================================== -->

<project name="bwsubmit.liferay4.deploy" default="deploy" >
  <target name="init">
    <!-- and define some properties based on those -->
    <property name="app.war.file"
              location="${dist.home}/${propval.app.war.name}.war" />

    <!-- Properties that differ from the personal client -->
    <!--
    <property name="app.web.xml"
              value="${app.sou.dir}/war/WEB-INF/web.xml" />
              -->

    <dirname property="portlet.build.dir" file="${ant.file}"/>

    <!-- Use generic portlet resources -->
    <property name="portlet.resources.dir"
              location="${portlet.build.dir}/../portlet/resources" />

    <!-- The intent is to have a set of quickstart skins configured for
         portal use. So far we've not managed that so for th etime being we
         will just use the standalone skin set.
    <property name="portlet.skins.dir"
              location="${portlet.resources.dir}/demoskins" />
              -->
    <property name="portlet.skins.dir"
              location="${portlet.build.dir}/../webapp/resources/demoskins" />
  </target>

  <!-- =================================================================
       The "deploy" target first builds a configured component then copies
       all required files to the appropriate servlet container directories.

       Currently this only works for the quickstart distribution.
       For example, it does not handle deploying into jboss and copying
       resource files (images, stylesheets) to external locations.
       ================================================================= -->

  <target name="deploy" depends="init,build.configured" >
    <!-- Copy the resources into the server -->

    <echo message="Copy from ${portlet.skins.dir}" />
    <property name="dest.skins.dir"
              location="${org.bedework.appserver.dir}/${propval.app.resources.dir}.${org.bedework.global.portal.platform}" />
    <echo message="       to ${dest.skins.dir}" />
    <delete dir="${dest.skins.dir}" />
    <copy todir="${dest.skins.dir}">
      <fileset dir="${portlet.skins.dir}" />
    </copy>
  </target>

  <target name="build.configured" depends="init" >
  </target>
</project>

