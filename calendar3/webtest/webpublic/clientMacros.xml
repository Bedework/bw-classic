<?xml version="1.0"?>
<!DOCTYPE project SYSTEM "../WebTest.dtd">

<project name="clientMacros" basedir="." default="init">
  <!-- Login to the user client
    -->
  <macrodef name="userLogin">
      <attribute name="id" default="douglm"/>
      <attribute name="pw" default="bedework"/>
      <attribute name="url" default="/ucal/setup.do"/>
    <sequential>
      <invoke description="get Login Page" url="@{url}" />

      <setInputField description="set user name"
                     name="j_username"
                     value="@{id}" />
      <setInputField description="set password"
                     name="j_password"
                     value="@{pw}" />
      <clickButton description="Click the submit button"
                   name="j_security_check" />
    </sequential>
  </macrodef>

  <macrodef name="publicSetup">
      <attribute name="url" default="/cal/setup.do"/>
    <sequential>
      <invoke description="setup url" url="@{url}" />
    </sequential>
  </macrodef>

  <!-- Verify we are on the main page and store some urls
    -->
  <macrodef name="verifyMainPage">
    <sequential>
      <!-- Store the links we want to use as mainurlXXX" -->
      <storeElementAttribute description="Extract href of prev view period url"
                             htmlId="prevViewPeriod"
                             attributeName="href"
                             propertyName="mainurlPrevViewperiod" />
      <storeElementAttribute description="Extract href of next view period url"
                             htmlId="nextViewPeriod"
                             attributeName="href"
                             propertyName="mainurlNextViewperiod" />
    </sequential>
  </macrodef>
</project>

